<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Admin Dashboard
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Admin Dashboard</ion-title>
    </ion-toolbar>
  </ion-header>

  <!-- Statistics Section -->
  <div class="stats-section">
    <div class="stat-card pending">
      <div class="stat-number">{{ pendingCount }}</div>
      <div class="stat-label">Pending</div>
    </div>
    <div class="stat-card approved">
      <div class="stat-number">{{ approvedCount }}</div>
      <div class="stat-label">Approved</div>
    </div>
    <div class="stat-card rejected">
      <div class="stat-number">{{ rejectedCount }}</div>
      <div class="stat-label">Rejected</div>
    </div>
  </div>

  <!-- All Cars Section -->
  <div class="section-title">
    <h2>All Submitted Cars</h2>
  </div>

  <div *ngIf="allCars.length > 0" class="cars-container">
    <ion-card 
      *ngFor="let car of allCars" 
      class="admin-car-card"
      [attr.data-testid]="'admin-car-' + car.id">
      
      <div class="card-content-wrapper">
        <!-- Car Image -->
        <div class="car-image-container">
          <ion-img 
            [src]="car.image" 
            [alt]="car.brand + ' ' + car.model"
            class="car-thumbnail">
          </ion-img>
        </div>

        <!-- Car Details -->
        <div class="car-details">
          <ion-card-header>
            <div class="title-status-row">
              <ion-card-title class="car-title">
                {{ car.brand }} {{ car.model }}
              </ion-card-title>
              <ion-badge 
                [color]="getStatusColor(car.status)"
                [attr.data-testid]="'status-' + car.id">
                {{ car.status }}
              </ion-badge>
            </div>
            <ion-card-subtitle>{{ car.year }} â€¢ {{ car.fuel }}</ion-card-subtitle>
          </ion-card-header>

          <ion-card-content>
            <ion-list lines="none" class="info-list">
              <ion-item>
                <ion-label>
                  <p class="info-label">Price</p>
                  <h3 class="info-value price-value">{{ formatPrice(car.price) }}</h3>
                </ion-label>
              </ion-item>
              <ion-item>
                <ion-label>
                  <p class="info-label">Mileage</p>
                  <h3 class="info-value">{{ formatKm(car.km) }}</h3>
                </ion-label>
              </ion-item>
              <ion-item>
                <ion-label>
                  <p class="info-label">Location</p>
                  <h3 class="info-value">{{ car.city }}</h3>
                </ion-label>
              </ion-item>
            </ion-list>
          </ion-card-content>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <ion-button 
          expand="block" 
          color="success"
          (click)="approveCar(car.id)"
          [disabled]="car.status === 'Approved'"
          [attr.data-testid]="'approve-' + car.id">
          <ion-icon slot="start" name="checkmark-circle"></ion-icon>
          Approve
        </ion-button>
        <ion-button 
          expand="block" 
          color="danger"
          fill="outline"
          (click)="rejectCar(car.id)"
          [disabled]="car.status === 'Rejected'"
          [attr.data-testid]="'reject-' + car.id">
          <ion-icon slot="start" name="close-circle"></ion-icon>
          Reject
        </ion-button>
      </div>
    </ion-card>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="allCars.length === 0">
    <ion-text color="medium">
      <h2>No Cars Submitted</h2>
      <p>There are no cars in the system yet.</p>
    </ion-text>
  </div>
</ion-content>
