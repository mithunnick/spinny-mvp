<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/cars" data-testid="back-button"></ion-back-button>
    </ion-buttons>
    <ion-title>Car Details</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <!-- Car Found -->
  <div *ngIf="car" class="car-detail-container">
    <!-- Car Image Gallery -->
    <div class="image-section">
      <ion-img 
        [src]="car.image" 
        [alt]="car.brand + ' ' + car.model"
        class="car-detail-image">
      </ion-img>
    </div>

    <!-- Car Header Info -->
    <div class="header-section ion-padding">
      <div class="title-status ion-margin-bottom">
        <h1 class="car-main-title ion-no-margin">{{ car.brand }} {{ car.model }}</h1>
        <ion-badge [color]="getStatusColor(car.status)" data-testid="status-badge">
          <ion-icon name="checkmark-circle" *ngIf="car.status === 'Approved'"></ion-icon>
          <ion-icon name="time-outline" *ngIf="car.status === 'Pending'"></ion-icon>
          {{ car.status }}
        </ion-badge>
      </div>
      <div class="price-section ion-text-center">
        <span class="price-label">Price</span>
        <span class="price-value" data-testid="car-price">{{ formatPrice(car.price) }}</span>
      </div>
    </div>

    <!-- Car Details Card -->
    <ion-card class="details-card ion-margin">
      <ion-card-header>
        <ion-card-title class="ion-no-margin">Vehicle Information</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-list lines="none" class="ion-no-padding">
          <!-- Year -->
          <ion-item class="ion-no-padding ion-margin-bottom">
            <ion-icon name="calendar-outline" slot="start" color="primary"></ion-icon>
            <ion-label>
              <h3 class="ion-no-margin">Year</h3>
              <p class="detail-value ion-no-margin ion-margin-top">{{ car.year }}</p>
            </ion-label>
          </ion-item>

          <!-- Fuel Type -->
          <ion-item class="ion-no-padding ion-margin-bottom">
            <ion-icon name="flame-outline" slot="start" color="primary"></ion-icon>
            <ion-label>
              <h3 class="ion-no-margin">Fuel Type</h3>
              <p class="detail-value ion-no-margin ion-margin-top">{{ car.fuel }}</p>
            </ion-label>
          </ion-item>

          <!-- Mileage -->
          <ion-item class="ion-no-padding ion-margin-bottom">
            <ion-icon name="speedometer-outline" slot="start" color="primary"></ion-icon>
            <ion-label>
              <h3 class="ion-no-margin">Mileage</h3>
              <p class="detail-value ion-no-margin ion-margin-top">{{ formatKm(car.km) }}</p>
            </ion-label>
          </ion-item>

          <!-- Location -->
          <ion-item class="ion-no-padding">
            <ion-icon name="location-outline" slot="start" color="primary"></ion-icon>
            <ion-label>
              <h3 class="ion-no-margin">Location</h3>
              <p class="detail-value ion-no-margin ion-margin-top">{{ car.city }}</p>
            </ion-label>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>

    <!-- Action Buttons -->
    <div class="action-section ion-padding">
      <ion-button 
        expand="block" 
        size="large"
        data-testid="contact-seller-button"
        class="ion-margin-bottom">
        <ion-icon name="cash-outline" slot="start"></ion-icon>
        Contact Seller
      </ion-button>
      <ion-button 
        expand="block" 
        fill="outline"
        size="large"
        (click)="goBack()"
        data-testid="back-to-list-button">
        Back to Listings
      </ion-button>
    </div>
  </div>

  <!-- Car Not Found -->
  <div *ngIf="!car" class="not-found-section ion-padding ion-text-center">
    <ion-text color="medium">
      <h2 class="ion-no-margin">Car Not Found</h2>
      <p class="ion-margin-top">The car you're looking for doesn't exist or has been removed.</p>
    </ion-text>
    <ion-button expand="block" (click)="goBack()" class="ion-margin-top">
      Back to Listings
    </ion-button>
  </div>
</ion-content>
